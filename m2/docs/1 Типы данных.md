
## Типы данных

При определении таблицы для всех ее столбцов необходимо указать тип данных. 

Тип данных определяет диапазон значений, которые могут храниться в столбце, сколько они будут занимать места в памяти. 

`PostgreSQL` поддерживает богатую палитру различных типов данных, среди которые условно можно разделить на подгруппы: числовые, символьные, логические, дата и время, бинарные и ряд других.

## Числовые типы данных

Группа числовых типов данных включает в себя целый ряд разновидностей: целочисленные типы, числа фиксированной точности, типы данных с плавающей точкой, последовательные типы (`serial`)

В составе целочисленных типов находятся следующие представители: `smallint, integer, bigint`. 

Если атрибут таблицы имеет один из этих типов, то он позволяет хранить только целочисленные данные. 
При этом перечисленные типы различаются по количеству байтов, выделяемых для хранения данных. 

В `PostgreSQL` существуют псевдонимы для этих стандартизированных имен типов, а именно: `int2, int4 и int8`.

Число байтов отражается в имени типа.


* `serial`: представляет автоинкрементирующееся числовое значение, которое занимает `4` байта и может хранить числа от `1 до 2147483647`. 

Значение данного типа образуется путем автоинкремента значения предыдущей строки. Поэтому, как правило, данный тип используется для определения идентификаторов строки.

* `smallserial`: представляет автоинкрементирующееся числовое значение, которое занимает 2 байта и может хранить числа от 1 до 32767. 
Аналог типа `serial` для небольших чисел.

* `bigserial`: представляет автоинкрементирующееся числовое значение, которое занимает 8 байт и может хранить числа от 1 до 9223372036854775807. Аналог типа `serial` для больших чисел.

* `smallint`: хранит числа от `-32768 до +32767`. Занимает 2 байта. Имеет псевдоним int2.

* `integer`: хранит числа от `-2147483648 до +2147483647`. Занимает 4 байта. Имеет псевдонимы int и int4.

* `bigint`: хранит числа от `-9223372036854775808` до `+9223372036854775807`. Занимает 8 байт. Имеет псевдоним int8.

* `numeric`: хранит числа с фиксированной точностью, которые могут иметь до 131072 знаков в целой части и до 16383 знаков после запятой.

Данный тип может принимать два параметра `precision и scale: numeric(precision, scale)`.

Параметр `precision` указывает на максимальное количество цифр, которые может хранить число.

Параметр `scale` представляет максимальное количество цифр, которые может содержать число после запятой. 

Это значение должно находиться в диапазоне от 0 до значения параметра `precision`. По умолчанию оно равно 0.

Например, для числа 23.5141 `precision` равно 6, а scale - 4.

* `decimal`: хранит числа с фиксированной точностью, которые могут иметь до `131072` знаков в целой части и до `16383` знаков в дробной части. То же самое, что и `numeric`.

* `real` хранит числа с плавающей точкой из диапазона от `1E-37 до 1E+37`. Занимает 4 байта. Имеет псевдоним `float4`.

* `double precision`: хранит числа с плавающей точкой из диапазона от `1E-307 до 1E+308`. Занимает 8 байт. Имеет псевдоним `float8`.

Примеры использования:

```sql

select 1/3::numeric as res;
select 1/3 ::integer as res;
select 1/3 ::smallint as res;
select 1/3 ::real as res;

select 3+1/3::numeric as res;

select 3+1/3::numeric(2,1) as res;

select 3.14::numeric(3,2) as res;
select 3.14::numeric(3,1) as res;
select 3.14::numeric(5,4) as res;

select 3+1/3::real as res;
select 3+1/3::float4 as res;

select 3+1/3::float8 as res;
select 3+1/3::double precision as res;

select 1.23::money as money;
SELECT '12.34'::float8::numeric::money;

```

Представителями типов данных с плавающей точкой являются типы `real и double precision`. 

Они представляют собой реализацию стандарта `IEEE «Standard 754 for Binary Floating-Point Arithmetic»`. 

Тип данных `real` может представить числа в диапазоне, как минимум, от `1E−37 до 1E+37` с точностью не меньше `6` десятичных цифр.

Тип double precision имеет диапазон значений примерно от `1E−307 до 1E+308` с точностью не меньше 15 десятичных цифр.
При попытке записать в такой столбец слишком большое или слишком маленькое значение будет генерироваться ошибка. 

Если точность вводимого числа выше допустимой, то будет иметь место округление значения.

А вот при вводе очень маленьких чисел, которые невозможно представить значениями, отличными от нуля, будет генерироваться ошибка потери значимости, или исчезновения значащих разрядов (an underflow error).

```sql
SELECT 0.1::real * 10;
SELECT 0.1::real * 10 = 1.0::real;

```


## Типы для работы с валютой (денежными единицами)

Для работы с денежными единицами определен тип `money`, который может принимать значения в диапазоне от `-92233720368547758.08 до +92233720368547758.07` и занимает 8 байт.

## Символьные типы

* character(n): представляет строку из фиксированного количества символов. С помощью параметра задается задается количество символов в строке. Имеет псевдоним char(n).

```sql
select 'abcde'::char(2) as res;
select 'abcde'::character(3) as res;
select 'abcde'::character(30) as res;
select 'abcde'::varchar(3) as res;
```

* character `varying(n)`: представляет строку из переменной длины. 

С помощью параметра задается задается максимальное количество символов в строке. Имеет псевдоним `varchar(n)`.

`text`: представляет текст произвольной длины.

Константы символьных типов в `SQL`-командах заключаются в одинарные кавычки.

```sql
SELECT 'PostgreSQL';
```

В том случае, когда в константе содержится символ одинарной кавычки или обратной косой черты, их необходимо удваивать

```sql
SELECT 'PGDAY''17';
```

В том случае, когда таких символов в константе много, все выражение становится трудно воспринимать. На помощь может прийти использование удвоенного символа «$». 

Эти символы выполняют ту же роль, что и одинарные кавычки, когда в них заключается строковая константа. 

При использовании символов «$» в качестве ограничителей уже не нужно удваивать никакие символы, содержащиеся в самой константе:
ни одинарные кавычки, ни символы обратной косой черты.

```sql
SELECT $$PGDAY'17'$$;
```
Возможность использования символов доллара в роли ограничителей символьной константы не является частью стандарта SQL. 
Это расширение, предлагаемое `PostgreSQL`.

## Строковые константы

PostgreSQL предлагает еще одно расширение стандарта SQL — строковые константы в стиле языка C. 

Чтобы иметь возможность их использовать, нужно перед начальной одинарной кавычкой написать символ «E».

Например, для включения в константу символа новой строки нужно сделать так:

```sql
SELECT E'PGDAY\t\t17\n100';
```


При использовании C-стиля необходимо удваивать обратную косую черту, если требуется поместить ее в константу буквально. 
А для включения в содержимое константы символа обратной кавычки можно либо удвоить ее, либо сделать так:

```sql
SELECT E'PGDAY\'17';
```

## Бинарные данные

Для хранения бинарных данных определен тип bytea. 

Он хранит данные в виде бинарных строк, которые представляют последовательность `октетов` или `байт`.



## Логический тип

Тип `boolean` может хранить одно из двух значений: `true или false`.

Вместо `true` можно указывать следующие значения: `TRUE, 't', 'true', 'y', 'yes', 'on', '1'`.

Вместо `false` можно указывать следующие значения: `FALSE, 'f', 'false', 'n', 'no', 'off', '0'`.

Типы для представления интернет-адресов

* cidr: интернет-адрес в формате IPv4 и IPv6. Например, 192.168.0.1. 

Занимает от 7 до 19 байт.

* inet: интернет-адрес в формате cidr/y, где cidr это адрес в формате IPv4 или IPv6, а /y - количество бит в адресе (если этот параметр не указан, то используется 34 для IPv4, 128 для IPv6). Например, 192.168.0.1/24 или 2001:4f8:3:ba:2e0:81ff:fe22:d1f1/128. Занимает от 7 до 19 байт.

* macaddr: хранит MAC-адрес. Занимает 6 байт.

* macaddr8: хранит MAC-адрес в формате EUI-64. Занимает 8 байт.

# Геометрические типы

* point: представляет точку на плоскости в формате (x,y). Занимает 16 байт.

* line: представляет линию неопределенной длины в формате {A,B,C}. Занимает 32 байта.

* lseg: представляет отрезок в формате ((x1,y1),(x2,y2)). Занимает 32 байта.

* box: представляет прямоугольник в формате ((x1,y1),(x2,y2)). Занимает 32 байта.

* path: представляет набор содиненных точек. В формате ((x1,y1),...) путь является закрытым (первая и последняя точка соединяются линией) и фактически представляет многоугольник. В формате [(x1,y1),...] путь является открытым Занимает 16+16n байт.

* polygon: представляет многоугольник в формате ((x1,y1),...). Занимает 40+16n байт.

* circle: представляет окружность в формате <(x,y),r>. Занимает 24 байта.

Остальные типы данных

* json: хранит данные json в текстовом виде.

* jsonb: хранит данные json в бинарном формате.

* uuid: хранит универсальный уникальный идентификатор (UUID), например, a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11. Занимает 32 байта.

* xml: хранит даные в формате XML.

